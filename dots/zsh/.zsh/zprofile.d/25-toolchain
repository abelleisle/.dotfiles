# Some systems don't have cmake in the repos, so we can install it locally to ~/.cmake
if [ -d "$HOME/.cmake/bin" ] ; then
    path=($HOME/.cmake/bin $path)
fi

if [ -d "$HOME/.rvm/" ] ; then
    [[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*
    # Add RVM to PATH for scripting. Make sure this is the last PATH variable change.
    path+=($HOME/.rvm/bin)
    export rvm_ignore_dotfiles=yes
fi

# If the ESP toolchain is installed, create a function to access it
idf() {
    if [ -d "$HOME/bin/esp/esp-idf" ] && [ -d "$HOME/bin/esp/toolchain" ] ; then
        export IDF_TOOLS_PATH=$HOME/bin/esp/toolchain
        if ! command -v idf.py &> /dev/null
        then
            . "$HOME/bin/esp/esp-idf/export.sh"
        fi

        idf.py "${@:1}"
    else
        echo "ESP-IDF is not installed.\n"
        echo "Please install the IDF to: $HOME/bin/esp/esp-idf\n"
        echo "Next, set IDF_TOOLS_PATH to: $HOME/bin/esp/toolchain"
        echo " and run $HOME/bin/esp/esp-idf/install.sh"
    fi
}

# Set PATH so it includes opencode if it exists
[[ -d "$HOME/.opencode/bin" ]] && path=($HOME/.opencode/bin $path)

# vim:ft=zsh
